<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<script src="animals.js" type="text/javascript"></script>
	<style>
		body {
			caret-color: transparent;
			}
	</style>
</head>

<body>
	<div id="card" class="card"  style="text-align: center;"> 

		<div id="card_heading">
			<h2 id="card_word"></h2>
			
		</div>

		<div>
			<img id="card_image" height="80%">
		</div>

		<div>
			<button onclick="NextWord(0);">Skip</button> <button onclick="NextWord(1);">Correct</button>
		</div>

	</div>

</body>

<script>


var counter = 0;
var results = [];
setScreen();

function NextWord(result) {

	if (counter < words.length) {

		results.push([counter, result]);


		counter = counter + 1;
		setScreen();	

	} else {
		alert("Set Finished!");
		card_word.innerText = results;
		card_image.src = "";
	}
}

function setScreen() {
	card_word.innerText = words[counter]['name'];
	card_image.src = "images/" + words[counter]['emoji_hex'] + ".png";
}



//
// DEVICE MOTION
//

// This function must be triggered by a user action (e.g., button click)
function requestMotionPermission() {
  if (typeof DeviceMotionEvent.requestPermission === 'function') {
    DeviceMotionEvent.requestPermission()
      .then(permissionState => {
        if (permissionState === 'granted') {
          window.addEventListener('devicemotion', handleDeviceMotion);
        } else {
          console.error('Device motion permission denied');
        }
      })
      .catch(console.error);
  } else {
    // Handle non-iOS 13+ devices or browsers that don't need a permission prompt
    window.addEventListener('devicemotion', handleDeviceMotion);
  }
}

function handleDeviceMotion(event) {
  // Your code to handle motion data goes here
  console.log('Acceleration:', event.accelerationIncludingGravity.x);
}
window.addEventListener('devicemotion', handleDeviceMotion, false); // 'false' is the default and allows repeated calls



/*
let locked = false;
const COOLDOWN = 1200;

function handleRotation(e) {
	if (locked) return;

	const beta = e.beta;
	console.log("beta:", beta);

	if (beta > 40) {
		trigger(1);
	} else if (beta < -40) {
		trigger(0);
	}
}

function trigger(result) {
	locked = true;
	NextWord(result);

	setTimeout(() => locked = false, COOLDOWN);
}

document.addEventListener("keydown", (e) => {
	if (e.key === "ArrowUp") trigger(1);     // Correct
	if (e.key === "ArrowDown") trigger(0);   // Pass
});
document.body.addEventListener("click", startTracking, { once: true });
window.addEventListener("deviceorientation", handleRotation);

async function startTracking() {
  if (typeof DeviceOrientationEvent !== 'undefined' && 
      typeof DeviceOrientationEvent.requestPermission === 'function') {
    const state = await DeviceOrientationEvent.requestPermission();
    if (state === 'granted') {
      window.addEventListener('deviceorientation', handleRotation);
    }
  } else {
    // Standard non-iOS browsers
    console.log("Android detected");
    window.addEventListener('deviceorientation', handleRotation);
  }
}

addEventListener("devicemotion", (event) => { })
ondevicemotion = (event) => {
	console.log(event);
}
*/

</script>
</html>